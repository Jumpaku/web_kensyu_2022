{"version":3,"file":"main.bundle.js","sources":["js/game/Input.js","js/game/Game.js","js/scenes/EmptyScene.js","js/main.js"],"sourcesContent":["export class KeyInput {\n    constructor() {\n        window.addEventListener(\"keydown\", (e) => {\n            const prevCount = this.downCount.get(e.code) ?? 0;\n            this.downCount.set(e.code, prevCount + 1);\n        });\n        window.addEventListener(\"keyup\", (e) => {\n            const prevCount = this.upCount.get(e.code) ?? 0;\n            this.upCount.set(e.code, prevCount + 1);\n        });\n    }\n    downCount = new Map();\n    upCount = new Map();\n    reset() {\n        this.downCount = new Map();\n        this.upCount = new Map();\n    }\n    getDownCount(code) {\n        return this.downCount.get(code) ?? 0;\n    }\n    getUpCount(code) {\n        return this.upCount.get(code) ?? 0;\n    }\n}\n","import { KeyInput } from \"./Input\";\nexport class Game {\n    constructor(initialScene) {\n        this.performFrame = this.performFrame.bind(this);\n        this.currentScene = initialScene;\n        this.input = { key: new KeyInput() };\n    }\n    currentScene;\n    input;\n    start() {\n        window.requestAnimationFrame(this.performFrame);\n    }\n    performFrame(timeMicroseconds) {\n        const timeSeconds = timeMicroseconds / 1000.0;\n        this.currentScene = this.currentScene.update(timeSeconds, this.input);\n        this.currentScene.draw();\n        this.input.key.reset();\n        window.requestAnimationFrame(this.performFrame);\n    }\n}\n","export class EmptyScene {\n    currentTime = 0;\n    currentKey;\n    update(time, input) {\n        this.currentTime = time;\n        this.currentKey = input.key;\n        return this;\n    }\n    draw() {\n        console.log(\"down\", this.currentKey?.getDownCount(\"KeyA\") ?? 0, \"up\", this.currentKey?.getUpCount(\"KeyA\") ?? 0);\n    }\n}\n","import { Game } from \"./game/Game\";\nimport { EmptyScene } from \"./scenes/EmptyScene\";\nexport const main = () => {\n    new Game(new EmptyScene()).start();\n};\ndocument.querySelector(\"body\").onload = main;\n"],"names":[],"mappings":"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"}